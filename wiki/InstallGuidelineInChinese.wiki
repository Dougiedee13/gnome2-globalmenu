#summary Ubuntu Gusty/Hardy的安装指南
#labels Featured
这只是一份草案文档，它可能会导致一些计算机故障。
= 引言 =
这份指南假定你没有在电脑上编译过其他程序，并且，假定你使用的是Ubuntu Gusty。

==使用deb包安装==
===32位系统===

  * 打开一个终端。
  * 新建一个文件夹。
    {{{ mkdir global-menu-install}}} 

  * 进入这个文件夹
    {{{ cd global-menu-install}}}

  * 下载打过补丁的Gtk deb包和面板小程序
   * Gusty版：
   {{{ wget http://gnome2-globalmenu.googlecode.com/files/gnome-globalmenu-0.4.2_ubuntu-gusty-svn679.tar.gz}}} 
   * Hardy版：
   {{{wget http://gnome2-globalmenu.googlecode.com/files/gnome-globalmenu-0.4-svn964.tar.gz}}} 
  * 解压。
   * Gusty版：
    {{{tar zxvf gnome-globalmenu-0.4.2_ubuntu-gusty-svn679.tar.gz }}}
   * Hardy版：
    {{{tar zxvf gnome-globalmenu-0.4-svn964.tar.gz}}}
   
   
  * 安装。
   * Gusty版：
    # {{{cd gnome-globalmenu }}}
    # {{{sudo dpkg -i *.deb}}}
   * Hardy版：
    # {{{cd globalmenu }}}
    # {{{sudo dpkg -i *.deb}}}
   * *注意* 如果你在此处遇到包依赖关系错误错误，并且安装过老版本的globalmenu，请尝试卸载libgtk-directfb-2.0-0 libgtk-directfb-2.0-dev libgtk2.0-0-dbg libgtk2.0-dev，因为它们并不是默认安装。
    {{{sudo dpkg -r libgtk-directfb-2.0-0 libgtk-directfb-2.0-dev libgtk2.0-0-dbg libgtk2.0-dev}}}

   如果你依然遇到问题，请尝试使用覆盖安装。
{{{
    sudo dpkg -i --force-overwrite *.deb 
}}}

  * 编辑 ~/.gnomerc文件 (仅Gusty版）
    * *注意* Hardy版请跳过此步。
   添加下列代码：
    {{{export GTK_MODULES=libgnomenu }}}
  
  * 重新启动你的电脑，右键单击面板，找到Global Menubar，并且添加它。

=== 删除 gnome-globalmenu-applet ===
  * 删除面板上的applet
  * 打开终端
  * 删除gnome-globalmenu-appet
{{{
sudo dpkg -r gnome2-globalmenu-applet
}}}
  * 恢复成默认的Gtk库。
   * Gusty版：
{{{
sudo apt-get install libgtk2.0-0=2.12.0-1ubuntu3 gtk2-engines-pixbuf=2.12.0-1ubuntu3 gtk2.0-examples=2.12.0-1ubuntu3 libgtk2.0-dev=2.12.0-1ubuntu3 libgtk2.0-common=2.12.0-1ubuntu3
}}}
   * Hardy版：
{{{
sudo apt-get install libgtk2.0-0=2.12.9-3ubuntu3 gtk2-engines-pixbuf=2.12.9-3ubuntu3 gtk2.0-examples=2.12.9-3ubuntu3 libgtk2.0-common=2.12.9-3ubuntu3
}}}


=== 64位系统 ===
目前暂时没有64位系统的deb包，有人向我们反映64位系统下存在编译错误。我们没有64位的系统去研究错误的具体原因。这里有一个源码[http://code.google.com/p/gnome2-globalmenu/wiki/BuildFromScratch 编译指南]，如果你在64位系统上成功编译了，请在[http://code.google.com/p/gnome2-globalmenu/issues/list Issue]里面和我们联系。

 