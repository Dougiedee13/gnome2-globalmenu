#labels ubuntu,Phase-Deploy
a step by step guide for Gutsy Gibbon

THIS IS A DRAFT. DO NOT USE. IT KILLS KITTENS AND COMPUTERS TOO
= Introduction =
a step by step guide which assumes that you've never compiled anything on your system, and that this system is Gutsy Gibbon.

==Installing with debs==
===on a 32 bit system===
  * Open a terminal
  * Create a folder
    {{{ mkdir global-menu-install}}} 
  * Go to this folder
    {{{ cd global-menu-install}}}
  * Get the patched gtk debs and panel applet with the following instruction
    {{{ wget http://gnome2-globalmenu.googlecode.com/files/gnome-globalmenu-0.4.1_ubuntu-gusty-svn679.tar.gz}}}
   
    
  * Unarchive them
    {{{tar zxvf gnome-globalmenu-0.4.1_ubuntu-gusty-svn679.tar.gz }}}
  
  * Install them
    # {{{cd gnome-globalmenu }}}
    # {{{sudo dpkg -i *.deb}}}

  * *NOTE* if you have installed previous version of gnome-globalmenu and meet a dependency error of {{{libgtk-directfb-2.0-0 libgtk-directfb-2.0-dev libgtk2.0-0-dbg}}}, you can just remove them, since they are not installed by default.
   {{{sudo dpkg -r libgtk-directfb-2.0-0 libgtk-directfb-2.0-dev libgtk2.0-0-dbg}}}
    
    if you still meet some errors here, try
{{{
    sudo dpkg -i --force-overwrite *.deb 
}}}

   * Edit ~/.gnomerc
     # add a line to it
     {{{export GTK_MODULES=libgnomenu }}}

  * Restart your computer and right-click on the panel and click add to the panel. Look for Global Menubar. Add it. And voila. It should work.

===on a 64 bit system===

==Installing from source==
*Warning* 
someone has reported that building on 64 bit system is not available now. We don't have a 64 bit system to investigate the reason. So if you build successfully on 64 bit system, *PLEASE* contact us at the [http://code.google.com/p/gnome2-globalmenu/issues/list Issues list]

===Installing gtk2-aqd===

  * Prepare your system to add the gtk2-aqd patches
    # {{{sudo apt-get install build-essential}}}
    # {{{mkdir packages}}}
    # {{{cd packages}}}
    # {{{mkdir gtk-aqd}}}
    # {{{cd gtk-aqd}}}
    # {{{apt-get source libgtk2.0-0}}}
    # {{{sudo apt-get build-dep libgtk2.0-0}}}
    # {{{sudo apt-get install fakeroot}}}

  * Get and unarchive the attached gtkmenubar.patch with the following instruction
    # {{{ wget http://gnome2-globalmenu.googlecode.com/files/gtkmenubar.patch.tar.bz2}}} 
    # {{{ tar jxvf gtkmenubar.patch.tar.bz2}}}
  
  * Patch the gtk source
    # {{{cd gtk+2.0-2.12.0}}}
    # {{{patch -p1 < ../gtkmenubar.patch}}}
    # {{{mv gtkmenuembed-x11.h gtk/ }}}
  
  * Now compile the gtk, this would take half an hour.
   {{{dpkg-buildpackage -b -rfakeroot}}} 
  
  * Install the patched gtk libraries
   # {{{ cd .. }}}
   # {{{ sudo dpkg -i gtk2-engines-pixbuf_2.12.0-1ubuntu3_i386.deb libgtk2.0-0_2.12.0-1ubuntu3_i386.deb libgtk2.0-bin_2.12.0-1ubuntu3_all.deb libgtk2.0-common_2.12.0-1ubuntu3_all.deb libgtk2.0-dev_2.12.0-1ubuntu3_i386.deb}}}

===Installing the applet itself===

  * Install libgtk2.0-dev, intltool,libwnck-dev, libpanelapplet-2.0, gdk-2.0 
    {{{sudo aptitude install libgtk2.0-dev intltool libwnck-dev libpanelapplet2-dev gdk-imlib11-dev}}}
  * Download the source
    {{{svn co http://gnome2-globalmenu.googlecode.com/svn/trunk/ }}}
  * Compile and install
    # {{{ cd trunk/gnome2-globalmenu-applet}}}
    # {{{ ./autogen.sh }}}
    # {{{ make }}}
    # {{{ sudo make install }}}
  
  * Right-click on the panel and click add to the panel. Look for Global Menubar. Add it. And voila. It should work.