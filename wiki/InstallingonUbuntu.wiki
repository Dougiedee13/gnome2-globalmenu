#summary a step by step guide for Gutsy/Hardy
#labels ubuntu,Phase-Deploy,installation

THIS IS A DRAFT. DO NOT USE. IT KILLS KITTENS AND COMPUTERS TOO
= Introduction =
A step-by-step guide which assumes that you've never compiled anything on your system, and that this system is Gutsy Gibbon.
<wiki:toc max_depth="5" />


==Installing from the GNOME Global Menu PPA (Intrepid) ==

 # Ensure libgnomenu is loaded as a Gtk module by

{{{ 
export GTK_MODULES=globalmenu-gnome 
}}}

A good place to do this is in ~/.profile, ~/.bash_profile, or ~/.gnomerc, it depends on your flavor of Linux.

 # Create ~/.gnomerc (if that file doest already exist) 
 # Add this to the file
 # Uncomment the lines you want enabled.

{{{
# Uncomment to load the GTK module

# export GTK_MODULES=globalmenu-gnome

# Uncomment to tell the GTK module to open a Gtk

# TreeView for all menus in the application you start.

# export GNOMENU_FUN=1

# Uncomment to disable global menu.

# export GNOMENU_DISABLED=1

# Uncomment to print a lot of debugging messages

# export GNOMENU_VERBOSE=1

# Uncomment to save the debugging messages to the given file.

# export GNOMENU_LOG_FILE=/tmp/gnomenu.log

# uncomment to disable the plugin for specific programs.

# export GTK_MENUBAR_NO_MAC="fast-user-switch-applet"

}}}

 # Add the apt sources.list entries.

{{{
deb http://ppa.launchpad.net/gnome2-globalmenu/ubuntu intrepid main

deb-src http://ppa.launchpad.net/gnome2-globalmenu/ubuntu intrepid main
}}}


Coming soon: a script in deb package to make it easier.


==Installing with debs==
===on a 32 bit system===
====older version of the Global Menu====

=====0.4=====
  * Open a terminal
  * Create a folder
    {{{ mkdir global-menu-install}}} 
  * Go to this folder
    {{{ cd global-menu-install}}}
  * Get the patched gtk debs and panel applet with the following instruction
    * For Gusty:
    {{{ wget http://gnome2-globalmenu.googlecode.com/files/gnome-globalmenu-0.4.2_ubuntu-gusty-svn679.tar.gz}}}
    {{{ wget http://gnome2-globalmenu.googlecode.com/files/gnome-globalmenu-0.4_ubuntu-gusty-svn679.tar.gz}}}
    * For Hardy:
    {{{wget http://gnome2-globalmenu.googlecode.com/files/gnome-globalmenu-0.4-svn964.tar.gz}}}
   
    
  * Unarchive them
    * For Gusty:
    {{{tar zxvf gnome-globalmenu-0.4.2_ubuntu-gusty-svn679.tar.gz }}}
    * For Hardy:
    {{{tar zxvf gnome-globalmenu-0.4-svn964.tar.gz}}}
  
  * Install them
    * For Gusty:
     # {{{cd gnome-globalmenu }}}
     # {{{sudo dpkg -i *.deb}}}
    * For Hardy:
     # {{{cd globalmenu}}}
     # {{{sudo dpkg -i *.deb}}}

  * *NOTE* if you have installed previous version of gnome-globalmenu and meet a dependency error of {{{libgtk-directfb-2.0-0 libgtk-directfb-2.0-dev libgtk2.0-0-dbg libgtk2.0-dev}}}, you can just remove them, since they are not installed by default.
   {{{sudo dpkg -r libgtk-directfb-2.0-0 libgtk-directfb-2.0-dev libgtk2.0-0-dbg libgtk2.0-dev}}}
    
    if you still meet some errors here, try
{{{
    sudo dpkg -i --force-overwrite *.deb 
}}}

   * Edit ~/.gnomerc (Gusty Only)
     * You won't need this step for Hardy
     # add a line to it
     {{{export GTK_MODULES=libgnomenu }}}

  * Restart your computer and right-click on the panel and click add to the panel. Look for Global Menubar. Add it. And voila. It should work.

====newer version of the Global Menu====

===on a 64 bit system===
====older version of the Global Menu====
For Ubuntu Hardy, 8.04, compiled from svn 899

http://www.mediafire.com/?n4sz14fiwcj

kudos goes to ferdil

====newer version of the Global Menu====

There are no 64-bit Ubuntu packages yet. You can build from source by yourself.The latest revs seems to be compatible. For more information, see [http://code.google.com/p/gnome2-globalmenu/issues/detail?id=149 Issue 149]

==Installing from source==
===older version of the Global Menu===

====MacMenu O.1 ====

Install this before

{{{
sudo apt-get install build-essential libwnck-dev libpanelappletmm-2.6-dev
}}}

Then unpack the applet source and go in its folder

{{{
tar -xvzf macmenu-applet-0.1.tar.gz
cd macmenu-applet-0.1/
}}}
Then compile and install

{{{
make
sudo make install
}}}

NOTE: Be Patient, this compiles from source, which will take considerably longer than installing from the Binary Package (Binary ~1 Minute | Source ~30 Minutes)

====very old adq's original code====
If you really want the very old adq's original code you can check it out from:
http://gnome2-globalmenu.googlecode.com/svn/tags/0.1_11/
=====using autotools=====

We're first going to install the mac menu applet:

-Download this file (note: you must be a member of ubuntuforums.org to be able to download it)
http://ubuntuforums.org/attachment.php?attachmentid=47781&d=1193338299

-Open a terminal, go to the directory where you've downloaded the file using cd and execute the following command lines.

{{{
tar jxvf gnome-macmenu-applet-1.0.11.tar.bz2
cd gnome-macmenu-applet-1.0.11
sudo cp gnome-macmenu-applet /usr/lib/gnome-applets/
sudo cp GNOME_MacMenuApplet.server /usr/lib/bonobo/servers/
}}}


We're now gonna patch gtk+ with a gtk+ patch

-But we need dependencies installed first. I don't know what is needed exactly, here is the list of dev packages I have:

{{{
autotools-dev comerr-dev dpkg-dev libart-2.0-dev libatk1.0-dev libaudiofile-dev libavahi-client-dev libavahi-common-dev libavahi-glib-dev libbonobo2-dev libbonoboui2-dev libc6-dev libcairo-directfb2-dev libcairo2-dev libcupsys2-dev libdbus-1-dev libdirectfb-dev libesd0-dev libexpat1-dev libfontconfig1-dev libfreetype6-dev libgail-dev libgconf2-dev libgcrypt11-dev libgdk-pixbuf-dev libglade2-dev libglib1.2-dev libglib2.0-dev libgnome-keyring-dev libgnome2-dev libgnomecanvas2-dev libgnomeui-dev libgnomevfs2-dev libgnutls-dev libgpg-error-dev libgtk1.2-dev libgtk2.0-dev libhal-dev libhal-storage-dev libice-dev libidl-dev libjpeg62-dev libkrb5-dev liblzo2-dev libopencdk8-dev liborbit2-dev libpanel-applet2-dev libpango1.0-dev libpng12-dev libpopt-dev libselinux1-dev libsepol1-dev libsm-dev libstartup-notification0-dev libstdc++6-4.1-dev libsysfs-dev libtasn1-3-dev libtiff4-dev libusplash-dev libwnck-dev libx11-dev libxau-dev libxcomposite-dev libxcursor-dev libxdamage-dev libxdmcp-dev libxext-dev libxfixes-dev libxft-dev libxi-dev libxinerama-dev libxkbfile-dev libxml2-dev libxrandr-dev libxrender-dev libxres-dev libxt-dev linux-libc-dev x11proto-composite-dev x11proto-core-dev x11proto-damage-dev x11proto-fixes-dev x11proto-input-dev x11proto-kb-dev x11proto-randr-dev x11proto-render-dev x11proto-resource-dev x11proto-xext-dev x11proto-xinerama-dev xtrans-dev xutils-dev zlib1g-dev
}}}

you can install them before patching gtk+ by typing
{{{
sudo apt-get install ...packages from the list above...
}}}

Then we're starting the patching itself.

-Download this file (note: you must be a member of ubuntuforums.org to be able to download it)
http://ubuntuforums.org/attachment.php?attachmentid=47782&d=1193338357 

-Open a terminal, go to the directory where you've downloaded the file using cd and execute the following command lines.

Code: {{{
gzip -d gtk+-2.12.0-r2-gtkmenubar.diff.gz
sudo apt-get install build-essential
apt-get source gtk+2.0
tar zxvf gtk+2.0_2.12.0.orig.tar.gz
cd gtk+2.0-2.12.0
patch -p0 < ../gtk+-2.12.0-r2-gtkmenubar.diff
./configure --prefix=/usr
make
sudo make install
}}}

'''NOTE''' Be Patient, this compiles from source, which will take considerably longer than installing from the Binary Package (Binary ~1 Minute | Source ~30 Minutes)<<BR>><<BR>>

You're now ready to use all the mac menu goodness ! Please report in the forum thread any problems you might have encountered.


==== Ayoli's guide====
Refer to the [http://ayozone.org/2008/03/12/global-menu-the-new-gnome-macmenu/  guide] written by Ayoli.


===newer version of the Global Menu===
Refer to the Building from Source on Ubuntu page

====in English====
[BuildSourceOnUbuntu guide in English]

====in Chinese====
[BuildSourceOnUbuntuInChinese guide in Chinese]