#labels Phase-Design,Phase-Implementation,Featured
# This page is the home page for development documents, ideas, drafts and other garbages.

We are at 0.3, moving toward 0.4.

= Roadmap =
  * 0.1: `Origin`
    * Original gtk2-aqd and gnome-macmenu-applet
  * 0.2: `Rename`
    * Rename to Global Menu in order to avoid confusion.
    * Menu bars are scrollable if they are too long to fit into the screen
  * 0.3: `Clean-up`
    * Introduce the inter-process communication protocol for GlobalMenuBar
    * Initial the support for Skinning.
    * GConf preference support for the applet.
    * Better UI.
  * 0.4: `Re-designation`
    * Completely redesign in OO to fit every piece into current GDK/GTK architecture.
    * Introduce GtkGlobalMenuBar and the concept: `global menu for legacy gtk software`
    * Fully solve the Skinning Problem
  * 0.5: `Integration`
    * merge MenuServerApplet into gnome-panel to enhance desktop integration.
    * All of the GNOME Applications will be patched to build upon GtkGlobalMenuBar instead of GtkMenuBar .
    * Patch gnome-window-properties to provide an option to disable or enable global menu bar.
  * 0.6: `Platforms`
    * Remove the x11 dependency, or seperate GdkSocket into gdksocket-x11 and gdksocket-w32

= Features =
||DevelopmentDefaultMenu  ||Target: 0.5||
||DevelopmentCompatibilityEtoile|| ||

= Development Documentation Draft for 0.4 =

== Classes ==

|| Class Name || Desc ||Parent       || Dependencies || Location ||
|| GdkSocket  || interwindow communication for gtk|| GObject      || GdkWindow, GdkEvent, gdk-x11, Xlib || libgnomenu ||
|| GnomeMenuServer || menu server class|| GObject || GdkSocket || libgnomenu||
|| GnomeMenuClient || menu client class|| GObject || GdkSocket || libgnomenu||
|| GtkMenuBar || old gtk menubar, try to load libgnomenu and return a GtkLegacyMenuBar|| GtkMenuShell || GtkMenuItem, GtkGlobalMenuBar || gtk||
|| GtkGlobalMenuBar || global menubar || GtkMenuBar || GtkMenuItem, GdkSocket, GnomeMenuClient|| libgnomenu ||
|| GtkLegacyMenuBar || global menubar || GtkMenuBar || GtkMenuBar, GtkLegacyMenuBar|| libgnomenu ||
|| GnomeMenuQuirks || menubar quirks || GObject || ||libgnomenu||


== Arch ==

MenuServerApplet will be build upon GtkMenuServer. The applet can also optionally implement compatible MenuServer for KDE and Etotile. 

Patch GTK, when gtk_menu_bar_class_init is called, try to load libgnomenu,
when gtk_menu_bar_new is called, try to forward this to call to GtkLegacyMenuBar.

GtkLegacyMenuBar has two mode: global mode and local mode. Upon creation, it loads a GnomeMenuQuirks object and find out what quirks apply to current menubar. If the quirk is 'GLOBAL' then forward the creation to GtkGlobalMenuBar(global mode), if not, forward the creation back to GtkMenuBar(local mode). 

GnomeMenuQuirks will load quirks from a rc file or a xml file.

Maybe a diagram will be helpful.
Located at http://gnome2-globalmenu.googlecode.com/svn/branches/0.4-devel/doc/ClassDiagram.dia