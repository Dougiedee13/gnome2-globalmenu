#labels Phase-Requirements,IN-PROGRESS
#the specification for global menu 0.7

<wiki:toc max_depth="2" />

= Introduction =
  * Describe the purpose of the document and the global menu project here.
  * Although there are implications to specific implementations, 
    this document should be considered as a requirement document.
  * Link to the GTK implementation in the appendix?

= Global Menu Specifications =
  * TODO: Constants should be provided in a C header file? List them here?

== Roles ==
  * Client
  * Server

== Extensions to X EWMH Protocol ==
  === Atoms ===
  * `_NET_GLOBALMENU_MENU_CONTEXT` -- Should not be too frequent?
  * `_NET_GLOBALMENU_MENU_EVENT`

  === XML Representation of Menu Context ===
  * What is a Menu Context
  * Element Tags: menu, item.
  * id and position
  * DTD here ?
  * Path: Locating an element in the XML representation

== Client Side ==
  * Client: a Window with menu context.
  * Behavior? Scenarios?
  * How `_NET_GLOBALMENU_MENU_EVENT` should be dispatched?
     * Whether the property is immediately deleted is undefined.
  * When should `_NET_GLOBALMENU_MENU_CONTEXT` be modified?
     * Appearently it should not be too often. Why? 
       * Experiences in the GTK implemenation shows the slowness.
       * Writing to an Window Property a huge amount of text is slow.
       * The server will possibly take the new property and rebuild an entire menu up on each modification.
     * Reduce the frequency:
       * Build the menu context before saving it to `_NET_GLOBALMENU_MENU_CONTEXT`.
  * What should a Client implement to support the specification?
     * A map from path to real actions.
     
== Server Side ==
  * A Sever should present the menu context of the active window to the user.
    * No implication on the representation!
       * The plain XML?
       * ncurse
       * QT Widgets
       * or GTK Widgets
  * Active Window determination? EHWM! 
    * `_NET_ACTIVE_WINDOW` 
    * `WM_TRANSIENT_FOR`
  * When to set `_NET_GLOBALMENU_MENU_EVENT` on the client window?
    * Whenever an item is pressed.  * 

= Current Limitations =
  * Only one menu per window? Perhaps?

= Acknowledgements =
  * Other project members. 
    * `Mingxi Wu` for many thoughtful discussions over the message handling issues.
  * The mavericks: 
    * `Aqd`, the first Global Menu implementation with GNOME 2
    * `Jason McBrayer`, the first Global Menu implementation with GNOME
 
= Appendix A : GTK Implementation 
  * perhaps linking to other pages will be better.
  == GTK Plug-in Module =
  * globalmenu-gnome
  == GNOME Panel Applet ==
  * applet
